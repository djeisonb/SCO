<!-- widget grid -->
<section id="widget-grid" class="">


    <!-- START ROW -->

    <div class="row">

        <!-- NEW COL START -->
        <article class="col-sm-12 col-md-12 col-lg-12">

            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget" id="wid-id-3" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false">
                <header>
                    <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                    <h2>Formulário de Registro</h2>				

                </header>

                <!-- widget div-->
                <div>
                    <!-- widget content -->
                    <div class="widget-body no-padding">

                        <form action="" id="cadastro_usuario" class="smart-form" novalidate="novalidate">
                            <fieldset>
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-font"></i>
                                            <input type="text" name="nome_associado" id="nome_associado" placeholder="Nome do associado">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-tag"></i>
                                            <input type="text" name="cpf_associado" id="cpf_associado" placeholder="CPF" data-mask="999.999.999-99" data-mask-placeholder="*">
                                        </label>
                                    </section>
                                </div>

                                <div class="row">
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="tipo_cota" id="tipo_cota">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input"> <i class="icon-append fa fa-tags"></i>
                                            <input type="text" name="numero_identidade" id="numero_identidade" placeholder="Numero da identidade">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-calendar"></i>
                                            <input type="text" name="data_expedicao" id="data_expedicao" placeholder="Data de expedição" data-mask="99/99/9999" data-mask-placeholder="*">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-bank"></i>
                                            <input type="text" name="orgao_emissor" id="orgao_emissor"  placeholder="Órgão emissor" data-mask="aaa-aa" data-mask-placeholder="*">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-calendar"></i>
                                            <input type="text" name="data_nascimento" id="data_nascimento"  placeholder="Data de nascimento" data-mask="99/99/9999" data-mask-placeholder="*">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-map-marker"></i>
                                            <input type="text" name="naturalidade" id="naturalidade" placeholder="Naturalidade">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="estado" id="estado">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="nacionalidade" id="nacionalidade">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-font"></i>
                                            <input type="text" name="nome_pai" id="nome_pai" placeholder="Nome do pai">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-font"></i>
                                            <input type="text" name="nome_mae" id="nome_mae" placeholder="Nome da mãe">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="sexo" id="sexo">
                                                <option value="0" selected="" disabled="">Sexo</option>
                                                <option value="Masculino">Masculino</option>
                                                <option value="Feminino">Feminino</option>
                                            </select> <i></i>
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="escolaridade" id="escolaridade">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="estado_civil" id="estado_civil">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-home"></i>
                                            <input type="text" name="endereco_residencial" id="endereco_residencial" placeholder="Endereço residencial">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-sort-numeric-asc"></i>
                                            <input type="text" name="numero" id="numero" placeholder="Número">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-font"></i>
                                            <input type="text" name="complemento" id="complemento" placeholder="Complemento">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-map-marker"></i>
                                            <input type="text" name="bairro" id="bairro" placeholder="Bairro">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-map-marker"></i>
                                            <input type="text" name="cidade" id="cidade" placeholder="Cidade">
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-6">
                                        <label class="input">
                                            <i class="icon-append fa fa-truck"></i>
                                            <input type="text" name="cep" id="cep" placeholder="CEP" data-mask="99999-999" data-mask-placeholder="*">
                                        </label>
                                    </section>
                                    <section class="col col-6">
                                        <label class="select">
                                            <select name="tipo_residencia" id="tipo_residencia">
                                            </select> <i></i>
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <section class="col col-4">
                                        <label class="input">
                                            <i class="icon-append fa fa-calendar"></i>
                                            <input type="text" name="anos_residencia" id="anos_residencia" placeholder="Tempo na residência">
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="input">
                                            <i class="icon-append fa fa-phone"></i>
                                            <input type="text" name="telefone" id="telefone" placeholder="Telefone fixo" data-mask="(99)9999-9999" data-mask-placeholder='*'>
                                        </label>
                                    </section>
                                    <section class="col col-4">
                                        <label class="input">
                                            <i class="icon-append fa fa-phone"></i>
                                            <input type="text" name="celular" id="celular" placeholder="Telefone Celular" data-mask="(99)9999-9999" data-mask-placeholder='*'>
                                        </label>
                                    </section>
                                </div>
                                
                                <div class="row">
                                    <div class="col col-6">
                                        <label class="input">
                                            <i class="icon-append">@</i>
                                            <input type="text" name="email" id="email" placeholder="Endereço de E-mail">
                                        </label>
                                    </div>
                                </div>
                                
                            </fieldset>
                            <footer>
                                <button type="submit" class="btn btn-primary">
                                    Salvar associado
                                </button>
                            </footer>
                        </form>

                    </div>
                    <!-- end widget content -->

                </div>
                <!-- end widget div -->

            </div>
            <!-- end widget -->				


        </article>
        <!-- END COL -->

    </div>

    <!-- END ROW -->

</section>
<!-- end widget grid -->


<!-- SCRIPTS ON PAGE EVENT -->
<script type="text/javascript">
    
    /** Chamada da função de preenchimento de combo **/
    buscar_combo();
    
    /** Carrega o script responsável pela validação de cpf **/
    loadScript('./js/validacao/valida_cpf.js');
    
    /** Funções globais do Framework **/
    pageSetUp();

    /** Chamada do arquivo de validação de formulário **/
    loadScript("./js/plugin/jquery-validate/jquery.validate.min.js", validarFormulario);


    /** Script para validação do formulário de cadastro **/
    function validarFormulario() {

        var cadastro = $('#cadastro_usuario').validate({
            rules: {
                nome_associado: {
                    required: true
                },
                cpf_associado: {
                    required: true
                },
                tipo_cota: {
                    required: true
                },
                data_expedicao: {
                    required: true
                },
                orgao_emissor: {
                    required: true
                },
                data_nascimento: {
                    required: true
                },
                naturalidade: {
                    required: true
                },
                estado: {
                    required: true
                },
                nacionalidade: {
                    required: true
                },
                nome_pai: {
                    required: true
                },
                nome_mae: {
                    required: true
                },
                sexo: {
                    required: true
                },
                escolaridade: {
                    required: true
                },
                estado_civil: {
                    required: true
                },
                endereco_residencial: {
                    required: true
                },
                numero: {
                    digits: true
                },
                bairro: {
                    required: true
                },
                cidade: {
                    required: true
                },
                cep: {
                    required: true
                },
                tipo_residencia: {
                    required: true
                },
                anos_residencia: {
                    required: true
                },
                telefone: {
                    required: true
                },
                email: {
                    required: true
                }
            },
            messages: {
                nome_associado: {
                    required: 'Informe o nome do associado'
                },
                cpf_associado: {
                    required: 'Informe um CPF válido'
                },
                tipo_cota: {
                    required: 'Informe o tipo da cota'
                },
                data_expedicao: {
                    required: 'Informe a data de expedição do RG'
                },
                orgao_emissor: {
                    required: 'Informe o órgão emissor do RG'
                },
                data_nascimento: {
                    required: 'Informa a data de nascimento'
                },
                naturalidade: {
                    required: 'Informe a naturalidade'
                },
                estado: {
                    required: 'Informe o estado de nascimento'
                },
                nacionalidade: {
                    required: 'Favor fornecer uma nacionalidade'
                },
                nome_pai: {
                    required: 'Informe o nome do pai'
                },
                nome_mae: {
                    required: 'Informe o nome da mãe'
                },
                sexo: {
                    required: 'Informe o sexo'
                },
                escolaridade: {
                    required: 'Informe a escolaridade'
                },
                estado_civil: {
                    required: 'Informe o estado civil'
                },
                endereco_residencial: {
                    required: 'Informe o endereço'
                },
                numero: {
                    digits: 'Favor informar somente números'
                },
                bairro: {
                    required: 'Informe o bairro'
                },
                cidade: {
                    required: 'Informe a cidade'
                },
                cep: {
                    required: 'Informe o CEP'
                },
                tipo_residencia: {
                    required: 'Informe o tipo de residência'
                },
                anos_residencia: {
                    required: 'Informe o tempo na residência'
                },
                telefone: {
                    required: 'Informe um telefone de contato'
                },
                email: {
                    required: 'Informe um endereço de e-mail'
                }
            },
            errorPlacement: function(error, element) {
                error.insertAfter(element.parent());
            },
            submitHandler: function(){
                salvar();
            }
        });
    };
    //**************************************************************************
    
    /**
     * salvar()
     * 
     * Função desenvolvida para salvar os dados do novo associado
     * 
     * @author  :       Matheus Lopes Santos <fale_com_lopez@hotmail.com>
     * @date    :       10/08/2014
     * @version :       v0.1.0
     */
    function salvar()
    {
        $.ajax({
            url : '<?php echo app_baseurl().'admin/associados/novo/salvar'?>',
            type : "POST",
            data: {
                nome_associado: $('#nome_associado').val(),
                cpf_associado: $('#cpf_associado').val(),
                tipo_cota: $('#tipo_cota').val(),
                numero_identidade: $('#numero_identidade').val(),
                data_expedicao: $('#data_expedicao').val(),
                orgao_emissor: $('#orgao_emissor').val(),
                data_nascimento: $('#data_nascimento').val(),
                naturalidade: $('#naturalidade').val(),
                estado: $('#estado').val(),
                nacionalidade: $('#nacionalidade').val(),
                nome_pai: $('#nome_pai').val(),
                nome_mae: $('#nome_mae').val(),
                sexo: $('#sexo').val(),
                escolaridade: $('#escolaridade').val(),
                estado_civil: $('#estado_civil').val(),
                endereco_residencial: $('#endereco_residencial').val(),
                numero: $('#numero').val(),
                complemento: $('#complemento').val(),
                bairro: $('#bairro').val(),
                cidade: $('#cidade').val(),
                cep: $('#cep').val(),
                tipo_residencia: $('#tipo_residencia').val(),
                anos_residencia: $('#anos_residencia').val(),
                telefone: $('#telefone').val(),
                celular: $('#celular').val(),
                email: $('#email').val()
            },
            dataType: "html",
            success: function(e)
            {
                if(e == 1)
                {
                    msg_sucesso('salvou');
                }
                else
                {
                    msg_erro('Não salvou');
                }
            }
        });
    }
    //**************************************************************************
    
    /**
     * buscar_combo()
     * 
     * função desenvolvida para buscar as opções que irão popular as combobox
     * 
     * @author  :       Matheus Lopes Santos <fale_com_lopez@hotmail.com>
     * @todo    :       Setar para os outros elementos o retorno do PHP
     */
    function buscar_combo()
    {
        $.get('<?php echo app_baseurl().'admin/associados/novo/preenchimento_combo'?>', function(e){
            $('#tipo_cota').html(e.tipo_cota);
            $('#escolaridade').html(e.escolaridades);
            $('#estado_civil').html(e.estado_civil);
            $('#estado').html(e.estados);
            $('#nacionalidade').html(e.nacionalidade);
            $('#tipo_residencia').html(e.residencia);
        }, "json");
    }
    //**************************************************************************
    
    /**
     * verifica_cpf()
     * 
     * Função desenvolvida para verificar a validade de um cpf
     * 
     * @author  :       Matheus Lopes Santos <fale_com_lopez@hotmail.com>
     */
    $('#cpf_associado').blur(function(){
        cpf = $(this).val();
        
        if(validarCPF(cpf) == false)
        {
            msg_erro('CPF inválido');
            
            $(this).val("");
        }
    });
    //**************************************************************************
</script>